# Support for Short and Full UUID App ID

* Proposal: [SDL-0153](0153-support-short-long-appid.md)
* Author: [Kevin Burdette](https://github.com/khburdette), [Markos Rapitis](https://github.com/mrapitis)
* Status: **Accepted**
* Impacted Platforms: [ Core / iOS / Android / Web / RPC ]

## Introduction

Some OEM legacy head units can't use an app id that has been generated by [smartdevicelink.com](https://www.smartdevicelink.com). We would like to propose a shortened version of the UUID to be used in the legacy app id field and we add another variable for "fullAppID".

## Motivation

Some legacy head units suffer from a couple technical issues when trying to use the UUID formatted app id generated by [smartdevicelink.com](https://www.smartdevicelink.com). The first issue is that it's too many characters for some head unit implementations. The second issue is that some legacy head units look for an app id that is a string of letters and numbers, so the dash ("-") causes issues.

When the head unit has trouble recognizing the app id, it can cause an issue with app permissions. If the app id in the policy table doesn't match the app id the system interprets, the app won't receive proper permissions (likely falling back to the base permission set). This can also cause issue's with how files are saved and used on the head unit because of the app id string used in the putFile RPC's file path.

## Proposed solution

Add a new variable to RegisterAppInterface request:

| Value |  Type | Mandatory | Description | 
| ---------- | ---------- |:-----------: |:-----------:|
|`fullAppID`|String|True|ID used to validate app with policy table entries|

When an app registers with [smartdevicelink.com](https://www.smartdevicelink.com), it is assigned an "appID" and a "fullAppID". The "fullAppID" will be the full UUID appID SHAID is currently generating. The "appID" string will be the first 10 non "-" characters of the full "fullAppID".  

For example, SHAID currently generates: 123e4567-e89b-12d3-a456-426655440000
* appID: 123e4567e8
* fullAppID: 123e4567-e89b-12d3-a456-426655440000

SDL ignores values it doesn't know about, so legacy head units will be safe.

SDL Core should use "fullAppID" instead of "appID" whenever possible.

If only the (short) appID is present in the RegisterAppInterface RPC request (legacy apps), sdl core shall use the (short) appID as the internal policy app id. i.e. use appID as the policy_app_id and use it to construct the icon path.

If both the (short) appID and the (long) fullAppID are in the RegisterAppInterface RPC request (updated apps), sdl core shall ignore the (short) appID and use the (long) fullAppID as the internal policy app id. i.e. use fullAppID as the policy_app_id and use it to construct the icon path.

For ease of use, the mobile libraries will be updated to automatically create the (short) appID based on the first 10 non "-" characters of the "fullAppID" -- this will ensure apps continue to be backwards compatible with existing OEM implementations (without requiring extra work from mobile app developer standpoints). 

## Potential downsides

The short app id UUID could have an issue with app id uniqueness as it only contains the first ten characters of the UUID. The full UUID format is required to make the app's ID truly unique. This will only impact legacy head unit's that are using appID parameter instead of fullAppID.  

Upon further investigation of the UUID generator algorithm, we have found each section of the UUID to be random based on a simple UUID generator algorithm.  In our tests of 10,000 generated UUID's no duplicates where found when simply comparing the first 10 non "-" characters making the risk of a duplicate short appID based on this value very low.

## Impact on existing code

This will require an additional parameter in the RegisterAppInterface request RPC, which will impact mobile, core and cloud platforms.

## Alternatives considered

Options that would guarantee the uniqueness of the app id field while staying consistent with the full app id UUID.  
